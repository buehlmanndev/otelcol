services:
  otelcol:
    image: otel/opentelemetry-collector-contrib:0.141.0
    command: ["--config=/etc/otelcol/config.yaml"]
    volumes:
      - ./collector/docker/otel-collector.yaml:/etc/otelcol/config.yaml:ro
      - ./tests/fixtures:/fixtures:ro
      - ./tests/output:/output:rw
    environment:
      - SPLUNK_HEC_URL=http://hec-mock:8088/services/collector
      - SPLUNK_HEC_TOKEN=changeme
  hec-mock:
    image: python:3.12-slim
    command: ["python", "-m", "http.server", "8088"]
    working_dir: /srv
    volumes:
      - ./tests:/srv:rw
